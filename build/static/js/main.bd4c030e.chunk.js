(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){},54:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var r,o,a,c=t(0),i=t.n(c),u=t(31),s=t.n(u),l=(t(42),t(4)),d=t(11),f=t(6),b=t(9),j=t(10),p=(t(43),t(2)),m=t(3),O=t(36),h=new(function(){function e(){Object(p.a)(this,e),this.socket=null}return Object(m.a)(e,[{key:"connect",value:function(e){var n=this;return new Promise((function(t,r){if(n.socket=Object(O.a)(e),!n.socket)return r();n.socket.on("connect",(function(){t(n.socket)})),n.socket.on("connect_error",(function(e){console.log("Connection error: ",e),r(e)}))}))}}]),e}()),v={isInRoom:!1,setInRoom:function(){},playerSymbol:"x",setPlayerSymbol:function(){},isPlayerTurn:!1,setPlayerTurn:function(){},isGameStarted:!1,setGameStarted:function(){}},x=i.a.createContext(v),y=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"joinGameRoom",value:function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.emit("join_game",{roomId:t}),n.on("room_joined",(function(){return e(!0)})),n.on("room_join_error",(function(e){var n=e.error;return r(n)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"updateGame",value:function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.emit("update_game",{matrix:t});case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"onGameUpdate",value:function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.on("on_game_update",(function(e){var n=e.matrix;return t(n)}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"onStartGame",value:function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.on("start_game",t);case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"gameWin",value:function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.emit("game_win",{message:t});case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"onGameWin",value:function(){var e=Object(d.a)(Object(l.a)().mark((function e(n,t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.on("on_game_win",(function(e){var n=e.message;return t(n)}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}]),e}(),g=new y,k=t(1),w=j.a.div(r||(r=Object(b.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-top: 2em;\n"]))),S=j.a.input(o||(o=Object(b.a)(["\n  height: 30px;\n  width: 20em;\n  font-size: 17px;\n  outline: none;\n  border: 1px solid #8e44ad;\n  border-radius: 3px;\n  padding: 0 10px;\n"]))),T=j.a.button(a||(a=Object(b.a)(["\n  outline: none;\n  background-color: #8e44ad;\n  color: #fff;\n  font-size: 17px;\n  border: 2px solid transparent;\n  border-radius: 5px;\n  padding: 4px 18px;\n  transition: all 230ms ease-in-out;\n  margin-top: 1em;\n  cursor: pointer;\n\n  &:hover {\n    background-color: transparent;\n    border: 2px solid #8e44ad;\n    color: #8e44ad;\n  }\n"])));function G(e){var n=Object(c.useState)(""),t=Object(f.a)(n,2),r=t[0],o=t[1],a=Object(c.useState)(!1),i=Object(f.a)(a,2),u=i[0],s=i[1],b=Object(c.useContext)(x),j=b.setInRoom,p=(b.isInRoom,function(){var e=Object(d.a)(Object(l.a)().mark((function e(n){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=h.socket,r&&""!==r.trim()&&t){e.next=4;break}return e.abrupt("return");case 4:return s(!0),e.next=7,g.joinGameRoom(t,r).catch((function(e){alert(e)}));case 7:e.sent&&j(!0),s(!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return Object(k.jsx)("form",{onSubmit:p,children:Object(k.jsxs)(w,{children:[Object(k.jsx)("h4",{children:"Enter Room ID to Join the Game"}),Object(k.jsx)(S,{placeholder:"Room ID",value:r,onChange:function(e){var n=e.target.value;o(n)}}),Object(k.jsx)(T,{type:"submit",disabled:u,children:u?"Joining...":"Joing"})]})})}var P,I,_,C,R,E,J=t(37),W=j.a.div(P||(P=Object(b.a)(['\n  display: flex;\n  flex-direction: column;\n  font-family: "Zen Tokyo Zoo", cursive;\n  position: relative;\n']))),N=j.a.div(I||(I=Object(b.a)(["\n  width: 100%;\n  display: flex;\n"]))),D=j.a.div(_||(_=Object(b.a)(["\n  width: 13em;\n  height: 9em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  cursor: pointer;\n  border-top: ",";\n  border-left: ",";\n  border-bottom: ",";\n  border-right: ",";\n  transition: all 270ms ease-in-out;\n\n  &:hover {\n    background-color: #8d44ad28;\n  }\n"])),(function(e){return e.borderTop&&"3px solid #8e44ad"}),(function(e){return e.borderLeft&&"3px solid #8e44ad"}),(function(e){return e.borderBottom&&"3px solid #8e44ad"}),(function(e){return e.borderRight&&"3px solid #8e44ad"})),F=j.a.div(C||(C=Object(b.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 99;\n  cursor: default;\n"]))),z=j.a.span(R||(R=Object(b.a)(['\n  font-size: 100px;\n  color: #8e44ad;\n  &::after {\n    content: "X";\n  }\n']))),L=j.a.span(E||(E=Object(b.a)(['\n  font-size: 100px;\n  color: #8e44ad;\n  &::after {\n    content: "O";\n  }\n'])));function B(){var e=Object(c.useState)([[null,null,null],[null,null,null],[null,null,null]]),n=Object(f.a)(e,2),t=n[0],r=n[1],o=Object(c.useContext)(x),a=o.playerSymbol,i=o.setPlayerSymbol,u=o.setPlayerTurn,s=o.isPlayerTurn,l=o.setGameStarted,d=o.isGameStarted,b=function(e){for(var n=0;n<e.length;n++){for(var t=[],r=0;r<e[n].length;r++)t.push(e[n][r]);if(t.every((function(e){return e&&e===a})))return[!0,!1];if(t.every((function(e){return e&&e!==a})))return[!1,!0]}for(var o=0;o<e.length;o++){for(var c=[],i=0;i<e[o].length;i++)c.push(e[i][o]);if(c.every((function(e){return e&&e===a})))return[!0,!1];if(c.every((function(e){return e&&e!==a})))return[!1,!0]}if(e[1][1]){if(e[0][0]===e[1][1]&&e[2][2]===e[1][1])return e[1][1]===a?[!0,!1]:[!1,!0];if(e[2][0]===e[1][1]&&e[0][2]===e[1][1])return e[1][1]===a?[!0,!1]:[!1,!0]}return e.every((function(e){return e.every((function(e){return null!==e}))}))?[!0,!0]:[!1,!1]};return Object(c.useEffect)((function(){h.socket&&g.onGameUpdate(h.socket,(function(e){r(e),b(e),u(!0)})),h.socket&&g.onStartGame(h.socket,(function(e){l(!0),i(e.symbol),e.start?u(!0):u(!1)})),h.socket&&g.onGameWin(h.socket,(function(e){console.log("Here",e),u(!1),alert(e)}))}),[]),Object(k.jsxs)(W,{children:[!d&&Object(k.jsx)("h2",{children:"Waiting for Other Player to Join to Start the Game!"}),(!d||!s)&&Object(k.jsx)(F,{}),t.map((function(e,n){return Object(k.jsx)(N,{children:e.map((function(e,o){return Object(k.jsx)(D,{borderRight:o<2,borderLeft:o>0,borderBottom:n<2,borderTop:n>0,onClick:function(){return function(e,n,o){var a=Object(J.a)(t);if(null!==a[n][e]&&"null"!==a[n][e]||(a[n][e]=o,r(a)),h.socket){g.updateGame(h.socket,a);var c=b(a),i=Object(f.a)(c,2),s=i[0],l=i[1];s&&l?(g.gameWin(h.socket,"The Game is a TIE!"),alert("The Game is a TIE!")):s&&!l&&(g.gameWin(h.socket,"You Lost!"),alert("You Won!")),u(!1)}}(o,n,a)},children:e&&"null"!==e?"x"===e?Object(k.jsx)(z,{}):Object(k.jsx)(L,{}):null})}))})}))]})}var U=i.a.createContext();function Y(e){var n=e.children,t=i.a.useState(JSON.parse(window.localStorage.getItem("userid"))||!1),r=Object(f.a)(t,2),o=r[0],a=r[1];return i.a.useEffect((function(){o?window.localStorage.setItem("userid",JSON.stringify(o)):window.localStorage.removeItem("userid")}),[o]),Object(k.jsx)(U.Provider,{value:{state:o,setState:a},children:n})}var Z=function(){var e=i.a.useContext(U);return[e.state,e.setState]};t(54);var H,M,X,q=function(){var e=Z(),n=Object(f.a)(e,2)[1],t=Object(c.useState)(0),r=Object(f.a)(t,2),o=r[0],a=r[1],i=Object(c.useRef)();return Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)("h1",{children:"Name"}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(d.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://backend6.onrender.com/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.current.value})});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,a(null===r||void 0===r?void 0:r.status),n(r.data._id),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},children:[Object(k.jsx)("input",{placeholder:"name",className:"login-input",style:400===o?{border:"1px solid #D61F1F"}:{},ref:i,type:"text"}),400===o?Object(k.jsx)("p",{children:" User alrady created"}):""," ",Object(k.jsx)("br",{}),Object(k.jsx)("button",{className:"login-btn",children:"Enter"})]})]})},A=j.a.div(H||(H=Object(b.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1em;\n"]))),K=j.a.h1(M||(M=Object(b.a)(["\n  margin: 0;\n  color: #8e44ad;\n"]))),Q=j.a.div(X||(X=Object(b.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));var V=function(){var e=Z(),n=Object(f.a)(e,1)[0],t=Object(c.useState)(!1),r=Object(f.a)(t,2),o=r[0],a=r[1],i=Object(c.useState)("x"),u=Object(f.a)(i,2),s=u[0],b=u[1],j=Object(c.useState)(!1),p=Object(f.a)(j,2),m=p[0],O=p[1],v=Object(c.useState)(!1),y=Object(f.a)(v,2),g=y[0],w=y[1],S=Object(c.useState)(),T=Object(f.a)(S,2),P=T[0],I=T[1],_=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.connect("https://backend7.onrender.com").catch((function(e){console.log("Error: ",e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){_(),fetch("https://backend6.onrender.com/user",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.map((function(e){(null===e||void 0===e?void 0:e._id)==n&&I(null===e||void 0===e?void 0:e.name)}))}))}),[]);var C={isInRoom:o,setInRoom:a,playerSymbol:s,setPlayerSymbol:b,isPlayerTurn:m,setPlayerTurn:O,isGameStarted:g,setGameStarted:w};return n?Object(k.jsx)(x.Provider,{value:C,children:Object(k.jsxs)(A,{children:[Object(k.jsxs)(K,{children:["Welcome ",P," to Tic-Tac-Toe"]}),Object(k.jsxs)(Q,{children:[!o&&Object(k.jsx)(G,{}),o&&Object(k.jsx)(B,{})]})]})}):Object(k.jsx)(q,{})},$=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,56)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),r(e),o(e),a(e),c(e)}))};s.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(Y,{children:Object(k.jsx)(V,{})})}),document.getElementById("root")),$()}},[[55,1,2]]]);
//# sourceMappingURL=main.bd4c030e.chunk.js.map